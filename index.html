<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI性格测试 - 探索你的人格类型</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            transition: background 1s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            color: white;
            padding: 40px 0;
            animation: fadeInDown 0.8s ease;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .main-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeInUp 0.8s ease;
        }

        .tab-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tab-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .tab-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            transform: scale(1.05);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        .question-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            animation: fadeIn 0.4s ease;
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 30px;
            color: #2c3e50;
            font-weight: 500;
            text-align: center;
        }

        /* 新的程度选择样式 */
        .scale-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        /* 桌面端样式 */
        .scale-wrapper {
            width: 100%;
            max-width: 600px;
            position: relative;
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 0.9em;
            color: #666;
            padding: 0 10px;
            margin-bottom: 10px;
        }

        .scale-labels-mobile {
            display: none;
        }

        .scale-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: nowrap;
        }

        .scale-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid #e0e0e0;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            flex-shrink: 0;
        }

        .scale-button:hover {
            transform: scale(1.1);
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .scale-button.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: #667eea;
            transform: scale(1.15);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        /* 调整按钮大小以表示程度 */
        .scale-button.strong-disagree {
            width: 70px;
            height: 70px;
        }

        .scale-button.disagree {
            width: 65px;
            height: 65px;
        }

        .scale-button.slight-disagree {
            width: 60px;
            height: 60px;
        }

        .scale-button.neutral {
            width: 55px;
            height: 55px;
        }

        .scale-button.slight-agree {
            width: 60px;
            height: 60px;
        }

        .scale-button.agree {
            width: 65px;
            height: 65px;
        }

        .scale-button.strong-agree {
            width: 70px;
            height: 70px;
        }

        /* 移动端特殊样式 */
        .scale-scroll-container {
            display: block;
            width: 100%;
        }

        /* 导航按钮 */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }

        .nav-btn {
            padding: 12px 30px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 15px;
            color: #667eea;
            font-weight: 500;
        }

        .nav-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.05);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn.primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
        }

        .nav-btn.primary:hover:not(:disabled) {
            transform: scale(1.08);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        #result {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            margin-top: 20px;
            display: none;
            position: relative;
            overflow: hidden;
        }

        #result h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 2.5em;
        }

        #result p {
            color: #555;
            line-height: 1.8;
            font-size: 1.1em;
        }

        /* 人格形象样式 */
        .personality-avatar {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            position: relative;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .avatar-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            font-weight: bold;
            color: white;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.5s ease;
        }

        .avatar-circle::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: inherit;
            filter: blur(20px);
            opacity: 0.4;
            z-index: -1;
        }

        /* 卡通形象容器 */
        .cartoon-avatar {
            width: 100%;
            height: 100%;
            position: relative;
            border-radius: 50%;
            overflow: hidden;
        }

        /* 基础头部 */
        .avatar-head {
            width: 120px;
            height: 120px;
            background: #fdbcb4;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* 眼睛 */
        .avatar-eyes {
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            display: flex;
            justify-content: space-between;
        }

        .eye {
            width: 12px;
            height: 12px;
            background: #333;
            border-radius: 50%;
            position: relative;
        }

        .eye::after {
            content: '';
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            right: 2px;
        }

        /* 嘴巴 */
        .avatar-mouth {
            width: 30px;
            height: 15px;
            border: 3px solid #333;
            border-top: none;
            border-radius: 0 0 30px 30px;
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* 特征装饰 */
        .avatar-feature {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* INTJ - 建筑师：戴眼镜的智者 */
        .avatar-INTJ .avatar-feature {
            width: 80px;
            height: 30px;
            border: 3px solid #333;
            border-radius: 10px;
            background: rgba(255,255,255,0.3);
        }
        .avatar-INTJ .avatar-feature::before,
        .avatar-INTJ .avatar-feature::after {
            content: '';
            position: absolute;
            width: 15px;
            height: 3px;
            background: #333;
            top: 50%;
            transform: translateY(-50%);
        }
        .avatar-INTJ .avatar-feature::before { left: -15px; }
        .avatar-INTJ .avatar-feature::after { right: -15px; }

        /* INTP - 逻辑学家：思考者的额发 */
        .avatar-INTP .avatar-feature {
            width: 100px;
            height: 40px;
            background: #8b7355;
            border-radius: 50px 50px 0 0;
            top: 15%;
        }
        .avatar-INTP .eye { 
            width: 10px; 
            height: 14px;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        }

        /* ENTJ - 指挥官：皇冠 */
        .avatar-ENTJ .avatar-feature {
            width: 60px;
            height: 30px;
            background: #ffd700;
            clip-path: polygon(0% 100%, 15% 40%, 30% 60%, 50% 0%, 70% 60%, 85% 40%, 100% 100%);
            top: 10%;
        }

        /* ENTP - 辩论家：微笑的挑眉 */
        .avatar-ENTP .avatar-mouth {
            width: 40px;
            height: 20px;
            border-radius: 0 0 40px 40px;
        }
        .avatar-ENTP .eye::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 3px;
            background: #333;
            top: -8px;
            left: -4px;
            transform: rotate(-15deg);
        }

        /* INFJ - 提倡者：神秘的第三眼 */
        .avatar-INFJ .avatar-feature {
            width: 20px;
            height: 20px;
            border: 3px solid #16a085;
            border-radius: 50% 0;
            transform: translate(-50%, -50%) rotate(45deg);
            top: 25%;
        }

        /* INFP - 调停者：花朵头饰 */
        .avatar-INFP .avatar-feature {
            width: 40px;
            height: 40px;
            background: #ffb6c1;
            border-radius: 50%;
            top: 15%;
            box-shadow: 
                -15px 0 0 -5px #ffc0cb,
                15px 0 0 -5px #ffc0cb,
                0 -15px 0 -5px #ffc0cb,
                0 15px 0 -5px #ffc0cb;
        }

        /* ENFJ - 主人公：光环 */
        .avatar-ENFJ .avatar-feature {
            width: 140px;
            height: 140px;
            border: 4px solid rgba(255, 215, 0, 0.6);
            border-radius: 50%;
            top: 50%;
            background: radial-gradient(circle, transparent 50%, rgba(255, 215, 0, 0.1) 100%);
        }

        /* ENFP - 竞选者：彩虹头发 */
        .avatar-ENFP .avatar-feature {
            width: 100px;
            height: 50px;
            background: linear-gradient(90deg, #ff6b6b, #ffd93d, #6bcf7f, #4d96ff, #c56cf0);
            border-radius: 50px 50px 0 0;
            top: 12%;
        }

        /* ISTJ - 物流师：领带 */
        .avatar-ISTJ .avatar-feature {
            width: 20px;
            height: 60px;
            background: #2c3e50;
            clip-path: polygon(50% 0%, 30% 20%, 30% 100%, 70% 100%, 70% 20%);
            top: 65%;
        }

        /* ISFJ - 守卫者：护士帽 */
        .avatar-ISFJ .avatar-feature {
            width: 80px;
            height: 30px;
            background: white;
            border: 2px solid #e74c3c;
            border-radius: 10px 10px 0 0;
            top: 10%;
        }
        .avatar-ISFJ .avatar-feature::after {
            content: '+';
            color: #e74c3c;
            font-size: 24px;
            font-weight: bold;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* ESTJ - 执行者：商务眼镜 */
        .avatar-ESTJ .avatar-feature {
            width: 80px;
            height: 25px;
            border: 4px solid #34495e;
            border-radius: 5px;
            background: linear-gradient(180deg, rgba(255,255,255,0.5), rgba(200,200,200,0.3));
        }

        /* ESFJ - 执政官：温暖的脸颊 */
        .avatar-ESFJ .avatar-head::before,
        .avatar-ESFJ .avatar-head::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 20px;
            background: rgba(255, 182, 193, 0.6);
            border-radius: 50%;
            top: 50%;
        }
        .avatar-ESFJ .avatar-head::before { left: 15px; }
        .avatar-ESFJ .avatar-head::after { right: 15px; }

        /* ISTP - 鉴赏家：工具 */
        .avatar-ISTP .avatar-feature {
            width: 30px;
            height: 50px;
            background: #7f8c8d;
            border-radius: 3px;
            transform: translate(-50%, -50%) rotate(45deg);
            top: 75%;
            left: 75%;
        }
        .avatar-ISTP .avatar-feature::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 8px;
            background: #95a5a6;
            top: -5px;
            left: -5px;
            border-radius: 2px;
        }

        /* ISFP - 探险家：贝雷帽 */
        .avatar-ISFP .avatar-feature {
            width: 90px;
            height: 35px;
            background: #e74c3c;
            border-radius: 50% 50% 0 0;
            top: 10%;
            transform: translate(-50%, -50%) rotate(-10deg);
        }
        .avatar-ISFP .avatar-feature::after {
            content: '';
            width: 15px;
            height: 15px;
            background: #c0392b;
            border-radius: 50%;
            position: absolute;
            top: -5px;
            right: 10px;
        }

        /* ESTP - 企业家：太阳镜 */
        .avatar-ESTP .avatar-feature {
            width: 90px;
            height: 35px;
            background: #2c3e50;
            border-radius: 10px;
            top: 40%;
        }
        .avatar-ESTP .avatar-feature::before,
        .avatar-ESTP .avatar-feature::after {
            content: '';
            position: absolute;
            width: 35px;
            height: 30px;
            background: #2c3e50;
            border-radius: 10px;
            top: 0;
        }
        .avatar-ESTP .avatar-feature::before { left: 0; }
        .avatar-ESTP .avatar-feature::after { right: 0; }

        /* ESFP - 表演者：星星装饰 */
        .avatar-ESFP .avatar-feature {
            width: 30px;
            height: 30px;
            background: #f1c40f;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            top: 15%;
        }
        .avatar-ESFP .avatar-mouth {
            width: 35px;
            height: 20px;
            border-radius: 0 0 35px 35px;
            border-width: 4px;
        }

        /* 主题色过渡动画 */
        body.theme-transition {
            transition: background 1s ease;
        }

        /* 各人格类型的主题色 */
        .type-INTJ { background: linear-gradient(135deg, #667eea, #764ba2); }
        .type-INTP { background: linear-gradient(135deg, #8e44ad, #9b59b6); }
        .type-ENTJ { background: linear-gradient(135deg, #c0392b, #e74c3c); }
        .type-ENTP { background: linear-gradient(135deg, #8e44ad, #3498db); }
        .type-INFJ { background: linear-gradient(135deg, #16a085, #27ae60); }
        .type-INFP { background: linear-gradient(135deg, #27ae60, #2ecc71); }
        .type-ENFJ { background: linear-gradient(135deg, #e67e22, #f39c12); }
        .type-ENFP { background: linear-gradient(135deg, #f39c12, #f1c40f); }
        .type-ISTJ { background: linear-gradient(135deg, #2c3e50, #34495e); }
        .type-ISFJ { background: linear-gradient(135deg, #16a085, #1abc9c); }
        .type-ESTJ { background: linear-gradient(135deg, #7f8c8d, #95a5a6); }
        .type-ESFJ { background: linear-gradient(135deg, #3498db, #2980b9); }
        .type-ISTP { background: linear-gradient(135deg, #34495e, #2c3e50); }
        .type-ISFP { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .type-ESTP { background: linear-gradient(135deg, #d35400, #e67e22); }
        .type-ESFP { background: linear-gradient(135deg, #f1c40f, #f39c12); }

        /* 结果卡片动画 */
        .result-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            animation: slideUp 0.8s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 特征标签 */
        .trait-tags {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .trait-tag {
            padding: 8px 16px;
            background: rgba(255,255,255,0.9);
            border-radius: 20px;
            font-size: 0.9em;
            color: #333;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            animation: fadeIn 0.5s ease;
        }

        .personality-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
            animation: fadeInUp 0.8s ease;
        }

        .personality-card {
            background: linear-gradient(135deg, rgba(168, 237, 234, 0.2), rgba(254, 214, 227, 0.2));
            padding: 25px;
            border-radius: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            backdrop-filter: blur(5px);
        }

        .personality-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.8));
        }

        .personality-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        .personality-card .type-code {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .personality-card .nickname {
            color: #667eea;
            font-style: italic;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .personality-card p {
            color: #555;
            line-height: 1.6;
            font-size: 0.95em;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 15px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .question-counter {
            text-align: center;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        #quiz-container {
            animation: fadeIn 0.4s ease;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0;
                transform: translateY(10px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .intro-section {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .intro-section h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 2em;
        }

        .intro-section p {
            color: #555;
            line-height: 1.8;
            font-size: 1.05em;
            max-width: 800px;
            margin: 0 auto;
        }

        .scale-hint {
            text-align: center;
            margin-top: 15px;
            font-size: 0.9em;
            color: #666;
            font-style: italic;
        }

        /* 移动端响应式设计 */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .personality-grid {
                grid-template-columns: 1fr;
            }

            .question-text {
                font-size: 1.1em;
                margin-bottom: 25px;
            }

            /* 隐藏桌面端标签 */
            .scale-labels {
                display: none;
            }

            /* 显示移动端标签 */
            .scale-labels-mobile {
                display: flex;
                justify-content: space-between;
                width: 100%;
                font-size: 0.85em;
                color: #666;
                padding: 0 5px;
                margin-bottom: 15px;
            }

            /* 移动端滚动容器 */
            .scale-scroll-container {
                overflow-x: auto;
                overflow-y: hidden;
                -webkit-overflow-scrolling: touch;
                padding: 10px 0;
                margin: 0 -10px;
            }

            .scale-wrapper {
                max-width: none;
                width: auto;
                padding: 0 10px;
            }

            .scale-buttons {
                display: flex;
                gap: 8px;
                justify-content: flex-start;
                flex-wrap: nowrap;
                padding: 0 20px;
                min-width: fit-content;
            }

            /* 移动端按钮尺寸调整 */
            .scale-button {
                width: 45px !important;
                height: 45px !important;
                flex-shrink: 0;
            }

            .scale-button.strong-disagree,
            .scale-button.strong-agree {
                width: 50px !important;
                height: 50px !important;
            }

            .scale-button.disagree,
            .scale-button.agree {
                width: 48px !important;
                height: 48px !important;
            }

            .scale-button.slight-disagree,
            .scale-button.slight-agree {
                width: 46px !important;
                height: 46px !important;
            }

            .scale-button.neutral {
                width: 44px !important;
                height: 44px !important;
            }

            /* 添加滚动提示 */
            .scale-scroll-container::after {
                content: '←滑动选择→';
                position: absolute;
                bottom: -20px;
                left: 50%;
                transform: translateX(-50%);
                font-size: 0.75em;
                color: #999;
                white-space: nowrap;
            }

            .scale-container {
                position: relative;
                padding-bottom: 25px;
            }

            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .nav-btn {
                width: 100%;
                padding: 14px 20px;
            }

            .scale-hint {
                font-size: 0.85em;
                margin-top: 20px;
            }
            
            /* 移动端人格形象调整 */
            .personality-avatar {
                width: 150px;
                height: 150px;
            }
            
            .avatar-circle {
                font-size: 3em;
            }
            
            /* 移动端卡片中的小头像调整 */
            .personality-card .avatar-circle {
                transform: scale(0.6) !important;
            }
            
            .personality-card .cartoon-avatar {
                transform: scale(0.6) !important;
            }
            
            /* 结果页面移动端优化 */
            #result h2 {
                font-size: 1.8em;
            }
            
            .trait-tags {
                padding: 0 10px;
            }
            
            .result-card {
                padding: 20px;
            }
        }

        /* 小屏幕手机优化 */
        @media (max-width: 380px) {
            .scale-button {
                width: 40px !important;
                height: 40px !important;
            }

            .scale-button.strong-disagree,
            .scale-button.strong-agree {
                width: 44px !important;
                height: 44px !important;
            }

            .scale-button.disagree,
            .scale-button.agree {
                width: 42px !important;
                height: 42px !important;
            }

            .scale-button.neutral {
                width: 38px !important;
                height: 38px !important;
            }

            .question-text {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>MBTI 性格测试</h1>
            <p>探索你的人格类型，了解真实的自己</p>
        </header>

        <div class="main-content">
            <div class="tab-container">
                <button class="tab-btn active" onclick="showTab('test')">开始测试</button>
                <button class="tab-btn" onclick="showTab('types')">16种人格</button>
                <button class="tab-btn" onclick="showTab('about')">关于MBTI</button>
            </div>

            <!-- 测试部分 -->
            <div id="test" class="tab-content active">
                <div class="intro-section" id="intro-section">
                    <h2>欢迎参加MBTI性格测试</h2>
                    <p>这个完整版测试包含60道题目，涵盖性格的四个维度。请根据你的真实感受选择最符合自己的程度，整个测试大约需要15-20分钟。</p>
                    <button class="tab-btn" style="margin-top: 20px;" onclick="startTest()">开始测试</button>
                </div>

                <div id="test-content" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress">0%</div>
                    </div>

                    <div id="quiz-container">
                        <!-- 题目将通过JavaScript动态生成 -->
                    </div>

                    <div id="result"></div>
                </div>
            </div>

            <!-- 16种人格类型 -->
            <div id="types" class="tab-content">
                <div class="intro-section">
                    <h2>16种人格类型概览</h2>
                    <p>MBTI将人格分为16种类型，每种都有其独特的特征、优势和成长方向。点击下方卡片了解更多详情。</p>
                </div>

                <div class="personality-grid">
                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea, #764ba2); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-INTJ" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>建筑师</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">INTJ</div>
                        <div class="nickname">战略思想家</div>
                        <p>富有想象力和战略性的思想家，总有一个计划。独立、理性、有决心，追求知识和能力。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(142, 68, 173, 0.1), rgba(155, 89, 182, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #8e44ad, #9b59b6); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-INTP" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>逻辑学家</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #8e44ad, #9b59b6); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">INTP</div>
                        <div class="nickname">创新的发明家</div>
                        <p>富有创新精神的发明家，对知识有着永不满足的渴望。逻辑性强，富有创意，独立思考。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(192, 57, 43, 0.1), rgba(231, 76, 60, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #c0392b, #e74c3c); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ENTJ" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>指挥官</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #c0392b, #e74c3c); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ENTJ</div>
                        <div class="nickname">大胆的领导者</div>
                        <p>大胆、富有想象力的领导者，总能找到方法或创造方法。天生的领导者，有魅力，自信。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(142, 68, 173, 0.1), rgba(52, 152, 219, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #8e44ad, #3498db); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ENTP" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>辩论家</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #8e44ad, #3498db); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ENTP</div>
                        <div class="nickname">聪明的挑战者</div>
                        <p>聪明好奇的思想家，无法抗拒智力挑战。机智、创新、外向，喜欢辩论。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(22, 160, 133, 0.1), rgba(39, 174, 96, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #16a085, #27ae60); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-INFJ" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>提倡者</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #16a085, #27ae60); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">INFJ</div>
                        <div class="nickname">神秘的理想主义者</div>
                        <p>安静而神秘，但又鼓舞人心的理想主义者。富有洞察力，有创意，理想主义。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(46, 204, 113, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #27ae60, #2ecc71); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-INFP" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>调停者</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #27ae60, #2ecc71); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">INFP</div>
                        <div class="nickname">诗意的梦想家</div>
                        <p>诗意、善良的利他主义者，总是渴望帮助他人。理想主义，忠诚，富有创造力。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(230, 126, 34, 0.1), rgba(243, 156, 18, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #e67e22, #f39c12); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ENFJ" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>主人公</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #e67e22, #f39c12); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ENFJ</div>
                        <div class="nickname">富有魅力的领导者</div>
                        <p>富有魅力和鼓舞人心的领导者，能够吸引听众。温暖，有同理心，负责任。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(243, 156, 18, 0.1), rgba(241, 196, 15, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #f39c12, #f1c40f); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ENFP" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>竞选者</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #f39c12, #f1c40f); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ENFP</div>
                        <div class="nickname">热情的创造者</div>
                        <p>热情、有创造力的自由精神，总能找到理由微笑。充满热情，富有想象力。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(44, 62, 80, 0.1), rgba(52, 73, 94, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #2c3e50, #34495e); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ISTJ" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>物流师</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #2c3e50, #34495e); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ISTJ</div>
                        <div class="nickname">可靠的执行者</div>
                        <p>实际和注重事实的个人，可靠性毋庸置疑。认真、可靠、有条理。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(22, 160, 133, 0.1), rgba(26, 188, 156, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #16a085, #1abc9c); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ISFJ" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>守卫者</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #16a085, #1abc9c); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ISFJ</div>
                        <div class="nickname">专注的保护者</div>
                        <p>非常专注和温暖的保护者，随时准备保护所爱的人。善良、负责、细心。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(127, 140, 141, 0.1), rgba(149, 165, 166, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #7f8c8d, #95a5a6); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ESTJ" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>执行者</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #7f8c8d, #95a5a6); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ESTJ</div>
                        <div class="nickname">高效的组织者</div>
                        <p>出色的管理者，在管理事务或人员方面无与伦比。实际、现实、果断。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #3498db, #2980b9); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ESFJ" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>执政官</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #3498db, #2980b9); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ESFJ</div>
                        <div class="nickname">关怀的支持者</div>
                        <p>极其关心他人、社交和受欢迎的人，总是渴望提供帮助。热心、合作、体贴。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(52, 73, 94, 0.1), rgba(44, 62, 80, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #34495e, #2c3e50); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ISTP" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>鉴赏家</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #34495e, #2c3e50); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ISTP</div>
                        <div class="nickname">大胆的实践者</div>
                        <p>大胆而实际的实验者，精通各种工具。冷静的观察者，灵活、宽容。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #e74c3c, #c0392b); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ISFP" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>探险家</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #e74c3c, #c0392b); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ISFP</div>
                        <div class="nickname">灵活的艺术家</div>
                        <p>灵活而迷人的艺术家，随时准备探索和体验新事物。安静、友好、敏感。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(211, 84, 0, 0.1), rgba(230, 126, 34, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #d35400, #e67e22); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ESTP" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>企业家</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #d35400, #e67e22); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ESTP</div>
                        <div class="nickname">精力充沛的实干家</div>
                        <p>聪明、精力充沛的实干家，享受生活的边缘。灵活、宽容、实际。</p>
                    </div>

                    <div class="personality-card" style="background: linear-gradient(135deg, rgba(241, 196, 15, 0.1), rgba(243, 156, 18, 0.1));">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; position: relative;">
                            <div class="avatar-circle" style="width: 100%; height: 100%; background: linear-gradient(135deg, #f1c40f, #f39c12); transform: scale(0.8);">
                                <div class="cartoon-avatar avatar-ESFP" style="transform: scale(0.7);">
                                    <div class="avatar-head">
                                        <div class="avatar-eyes">
                                            <div class="eye"></div>
                                            <div class="eye"></div>
                                        </div>
                                        <div class="avatar-mouth"></div>
                                    </div>
                                    <div class="avatar-feature"></div>
                                </div>
                            </div>
                        </div>
                        <h3>表演者</h3>
                        <div class="type-code" style="background: linear-gradient(135deg, #f1c40f, #f39c12); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ESFP</div>
                        <div class="nickname">自发的表演者</div>
                        <p>自发、精力充沛的表演者，生活永远不会无聊。外向、友好、接受。</p>
                    </div>
                </div>
            </div>

            <!-- 关于MBTI -->
            <div id="about" class="tab-content">
                <div class="intro-section">
                    <h2>关于MBTI性格类型指标</h2>
                    <p>Myers-Briggs Type Indicator（MBTI）是基于卡尔·荣格的心理类型理论发展而来的人格评估工具。</p>
                </div>

                <div style="padding: 20px; line-height: 1.8;">
                    <h3 style="color: #667eea; margin: 20px 0;">四个维度</h3>
                    <div style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                        <h4 style="color: #2c3e50;">外向(E) vs 内向(I)</h4>
                        <p style="color: #555;">关注能量的来源：外向者从外部世界获得能量，内向者从内心世界获得能量。</p>
                    </div>

                    <div style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                        <h4 style="color: #2c3e50;">感觉(S) vs 直觉(N)</h4>
                        <p style="color: #555;">信息收集方式：感觉型关注具体事实和细节，直觉型关注模式和可能性。</p>
                    </div>

                    <div style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                        <h4 style="color: #2c3e50;">思维(T) vs 情感(F)</h4>
                        <p style="color: #555;">决策方式：思维型基于逻辑和客观分析，情感型考虑价值观和人际影响。</p>
                    </div>

                    <div style="background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%); padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                        <h4 style="color: #2c3e50;">判断(J) vs 知觉(P)</h4>
                        <p style="color: #555;">生活方式：判断型喜欢有计划和结构，知觉型偏好灵活和自发。</p>
                    </div>

                    <h3 style="color: #667eea; margin: 30px 0 20px;">使用建议</h3>
                    <p style="color: #555; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        MBTI是一个有用的自我认识工具，可以帮助理解个人偏好和行为模式。然而，请记住：<br><br>
                        • 人格类型不是固定不变的标签<br>
                        • 每个人都是独特的，类型只是一个参考框架<br>
                        • 没有"好"或"坏"的人格类型<br>
                        • 个人成长和环境会影响行为表现<br>
                        • 建议将MBTI作为自我探索的起点，而不是终点
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 重新设计的题目，使用程度选择
        const questions = [
            // E/I 维度题目
            {
                dimension: "EI",
                text: "在派对或社交聚会上，我充满活力，越玩越兴奋",
                positiveDirection: "E"
            },
            {
                dimension: "EI",
                text: "我更喜欢一对一的深入交谈而不是群体聚会",
                positiveDirection: "I"
            },
            {
                dimension: "EI",
                text: "在做决定前，我需要独自思考一段时间",
                positiveDirection: "I"
            },
            {
                dimension: "EI",
                text: "我享受成为关注的焦点",
                positiveDirection: "E"
            },
            {
                dimension: "EI",
                text: "独处时我感到充电和恢复精力",
                positiveDirection: "I"
            },
            {
                dimension: "EI",
                text: "我倾向于立即分享我的想法和感受",
                positiveDirection: "E"
            },
            {
                dimension: "EI",
                text: "我需要安静的环境才能集中注意力",
                positiveDirection: "I"
            },
            {
                dimension: "EI",
                text: "认识新朋友对我来说很容易和愉快",
                positiveDirection: "E"
            },
            {
                dimension: "EI",
                text: "大型团体活动让我感到疲惫",
                positiveDirection: "I"
            },
            {
                dimension: "EI",
                text: "我通过与他人交谈来理清自己的想法",
                positiveDirection: "E"
            },
            {
                dimension: "EI",
                text: "我更喜欢书面交流而不是面对面交谈",
                positiveDirection: "I"
            },
            {
                dimension: "EI",
                text: "我很容易开始与陌生人的对话",
                positiveDirection: "E"
            },
            {
                dimension: "EI",
                text: "我需要大量的个人空间和私人时间",
                positiveDirection: "I"
            },
            {
                dimension: "EI",
                text: "团队合作激发我的创造力",
                positiveDirection: "E"
            },
            {
                dimension: "EI",
                text: "我在安静独处时最有创造力",
                positiveDirection: "I"
            },

            // S/N 维度题目
            {
                dimension: "SN",
                text: "我更关注实际的、具体的信息",
                positiveDirection: "S"
            },
            {
                dimension: "SN",
                text: "我经常思考未来的可能性和潜力",
                positiveDirection: "N"
            },
            {
                dimension: "SN",
                text: "我喜欢按部就班的详细说明",
                positiveDirection: "S"
            },
            {
                dimension: "SN",
                text: "我更喜欢理解整体概念而不是具体细节",
                positiveDirection: "N"
            },
            {
                dimension: "SN",
                text: "我信任经过验证的方法和经验",
                positiveDirection: "S"
            },
            {
                dimension: "SN",
                text: "我喜欢探索新的、未经测试的想法",
                positiveDirection: "N"
            },
            {
                dimension: "SN",
                text: "我注重当下的现实情况",
                positiveDirection: "S"
            },
            {
                dimension: "SN",
                text: "我经常陷入想象和白日梦中",
                positiveDirection: "N"
            },
            {
                dimension: "SN",
                text: "我更相信事实和数据",
                positiveDirection: "S"
            },
            {
                dimension: "SN",
                text: "我依靠直觉和预感做决定",
                positiveDirection: "N"
            },
            {
                dimension: "SN",
                text: "我喜欢实际的、动手的学习方式",
                positiveDirection: "S"
            },
            {
                dimension: "SN",
                text: "我对理论和抽象概念很感兴趣",
                positiveDirection: "N"
            },
            {
                dimension: "SN",
                text: "我记忆具体的细节和事实很准确",
                positiveDirection: "S"
            },
            {
                dimension: "SN",
                text: "我更容易记住整体印象而不是细节",
                positiveDirection: "N"
            },
            {
                dimension: "SN",
                text: "我喜欢传统和熟悉的做事方式",
                positiveDirection: "S"
            },

            // T/F 维度题目
            {
                dimension: "TF",
                text: "做决定时，逻辑比情感更重要",
                positiveDirection: "T"
            },
            {
                dimension: "TF",
                text: "我优先考虑和谐和他人的感受",
                positiveDirection: "F"
            },
            {
                dimension: "TF",
                text: "我相信真相比和善更重要",
                positiveDirection: "T"
            },
            {
                dimension: "TF",
                text: "批评让我感到受伤，即使是建设性的",
                positiveDirection: "F"
            },
            {
                dimension: "TF",
                text: "我能够保持客观，不受情感影响",
                positiveDirection: "T"
            },
            {
                dimension: "TF",
                text: "我很容易理解他人的情感需求",
                positiveDirection: "F"
            },
            {
                dimension: "TF",
                text: "效率比人际关系更重要",
                positiveDirection: "T"
            },
            {
                dimension: "TF",
                text: "我避免可能伤害他人感情的话题",
                positiveDirection: "F"
            },
            {
                dimension: "TF",
                text: "我更重视公平而不是同情",
                positiveDirection: "T"
            },
            {
                dimension: "TF",
                text: "看到他人痛苦让我深受影响",
                positiveDirection: "F"
            },
            {
                dimension: "TF",
                text: "我基于逻辑分析做决定",
                positiveDirection: "T"
            },
            {
                dimension: "TF",
                text: "我的决定受个人价值观影响很大",
                positiveDirection: "F"
            },
            {
                dimension: "TF",
                text: "我能直接指出问题而不考虑情面",
                positiveDirection: "T"
            },
            {
                dimension: "TF",
                text: "维护关系对我来说非常重要",
                positiveDirection: "F"
            },
            {
                dimension: "TF",
                text: "我更看重能力而不是努力",
                positiveDirection: "T"
            },

            // J/P 维度题目
            {
                dimension: "JP",
                text: "我喜欢有计划和时间表",
                positiveDirection: "J"
            },
            {
                dimension: "JP",
                text: "我喜欢保持选择开放，灵活应变",
                positiveDirection: "P"
            },
            {
                dimension: "JP",
                text: "截止日期让我感到压力",
                positiveDirection: "P"
            },
            {
                dimension: "JP",
                text: "我喜欢尽早完成任务",
                positiveDirection: "J"
            },
            {
                dimension: "JP",
                text: "突发的计划变更让我兴奋",
                positiveDirection: "P"
            },
            {
                dimension: "JP",
                text: "我需要结构和秩序才能高效工作",
                positiveDirection: "J"
            },
            {
                dimension: "JP",
                text: "我经常在最后一刻改变主意",
                positiveDirection: "P"
            },
            {
                dimension: "JP",
                text: "待办事项清单让我感到安心",
                positiveDirection: "J"
            },
            {
                dimension: "JP",
                text: "我喜欢即兴发挥",
                positiveDirection: "P"
            },
            {
                dimension: "JP",
                text: "未完成的任务让我焦虑",
                positiveDirection: "J"
            },
            {
                dimension: "JP",
                text: "我享受探索多种可能性",
                positiveDirection: "P"
            },
            {
                dimension: "JP",
                text: "我喜欢事情有明确的结论",
                positiveDirection: "J"
            },
            {
                dimension: "JP",
                text: "规则是用来打破的",
                positiveDirection: "P"
            },
            {
                dimension: "JP",
                text: "我的工作空间通常整洁有序",
                positiveDirection: "J"
            },
            {
                dimension: "JP",
                text: "压力下我表现最好",
                positiveDirection: "P"
            }
        ];

        let currentQuestion = 0;
        let userAnswers = [];
        let shuffledQuestions = [];

        // Fisher-Yates 洗牌算法
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startTest() {
            document.getElementById('intro-section').style.display = 'none';
            document.getElementById('test-content').style.display = 'block';
            
            // 打乱题目顺序
            shuffledQuestions = shuffleArray(questions);
            
            // 初始化答案数组
            userAnswers = new Array(shuffledQuestions.length).fill(null);
            
            // 显示第一题
            currentQuestion = 0;
            renderQuestion();
        }

        function renderQuestion() {
            const container = document.getElementById('quiz-container');
            
            if (currentQuestion >= shuffledQuestions.length) {
                showResult();
                return;
            }
            
            const q = shuffledQuestions[currentQuestion];
            const savedAnswer = userAnswers[currentQuestion];
            
            // 添加淡出效果
            container.style.opacity = '0';
            container.style.transform = 'translateY(10px)';
            
            setTimeout(() => {
                container.innerHTML = `
                    <div class="question-counter">
                        问题 ${currentQuestion + 1} / ${shuffledQuestions.length}
                    </div>
                    <div class="question-card">
                        <div class="question-text">
                            ${q.text}
                        </div>
                        <div class="scale-container">
                            <div class="scale-wrapper">
                                <div class="scale-labels">
                                    <span>非常不同意</span>
                                    <span>中立</span>
                                    <span>非常同意</span>
                                </div>
                                <div class="scale-labels-mobile">
                                    <span>非常不同意</span>
                                    <span>非常同意</span>
                                </div>
                                <div class="scale-scroll-container">
                                    <div class="scale-buttons">
                                        <button class="scale-button strong-disagree ${savedAnswer === -3 ? 'selected' : ''}" 
                                                onclick="selectAnswer(-3)" title="非常不同意">
                                        </button>
                                        <button class="scale-button disagree ${savedAnswer === -2 ? 'selected' : ''}" 
                                                onclick="selectAnswer(-2)" title="不同意">
                                        </button>
                                        <button class="scale-button slight-disagree ${savedAnswer === -1 ? 'selected' : ''}" 
                                                onclick="selectAnswer(-1)" title="有点不同意">
                                        </button>
                                        <button class="scale-button neutral ${savedAnswer === 0 ? 'selected' : ''}" 
                                                onclick="selectAnswer(0)" title="中立">
                                        </button>
                                        <button class="scale-button slight-agree ${savedAnswer === 1 ? 'selected' : ''}" 
                                                onclick="selectAnswer(1)" title="有点同意">
                                        </button>
                                        <button class="scale-button agree ${savedAnswer === 2 ? 'selected' : ''}" 
                                                onclick="selectAnswer(2)" title="同意">
                                        </button>
                                        <button class="scale-button strong-agree ${savedAnswer === 3 ? 'selected' : ''}" 
                                                onclick="selectAnswer(3)" title="非常同意">
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="scale-hint">选择后将自动进入下一题</div>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button class="nav-btn" onclick="previousQuestion()" ${currentQuestion === 0 ? 'disabled' : ''}>
                            上一题
                        </button>
                        <button class="nav-btn" onclick="skipQuestion()" style="opacity: 0.7;">
                            跳过此题
                        </button>
                    </div>
                `;
                
                // 添加淡入效果
                container.style.opacity = '1';
                container.style.transform = 'translateY(0)';
            }, 50);
            
            updateProgress();
        }

        function selectAnswer(value) {
            userAnswers[currentQuestion] = value;
            
            // 更新按钮状态
            const buttons = document.querySelectorAll('.scale-button');
            buttons.forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            
            // 启用下一题按钮
            const nextBtn = document.querySelector('.nav-btn.primary');
            if (nextBtn) {
                nextBtn.disabled = false;
            }
            
            // 自动跳转到下一题（延迟300ms以显示选择效果）
            setTimeout(() => {
                if (currentQuestion < shuffledQuestions.length - 1) {
                    currentQuestion++;
                    renderQuestion();
                } else {
                    // 如果是最后一题，显示结果
                    showResult();
                }
            }, 300);
        }

        function skipQuestion() {
            if (currentQuestion < shuffledQuestions.length - 1) {
                currentQuestion++;
                renderQuestion();
            } else {
                // 检查是否有未回答的问题
                const unanswered = userAnswers.filter(a => a === null).length;
                if (unanswered > 0) {
                    if (confirm(`还有${unanswered}道题未回答，是否继续查看结果？`)) {
                        showResult();
                    }
                } else {
                    showResult();
                }
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
            }
        }

        function updateProgress() {
            const answeredCount = userAnswers.filter(a => a !== null).length;
            const progress = (answeredCount / shuffledQuestions.length) * 100;
            document.getElementById('progress').style.width = progress + '%';
            document.getElementById('progress').textContent = Math.round(progress) + '%';
        }

        function calculateType() {
            const scores = {
                E: 0, I: 0,
                S: 0, N: 0,
                T: 0, F: 0,
                J: 0, P: 0
            };
            
            // 计算每个维度的得分
            for (let i = 0; i < shuffledQuestions.length; i++) {
                const question = shuffledQuestions[i];
                const answer = userAnswers[i];
                
                if (answer === null) continue;
                
                const dimension = question.dimension;
                const positive = question.positiveDirection;
                
                // 根据答案和问题方向计算得分
                if (dimension === "EI") {
                    if (positive === "E") {
                        scores.E += answer > 0 ? answer : 0;
                        scores.I += answer < 0 ? -answer : 0;
                    } else {
                        scores.I += answer > 0 ? answer : 0;
                        scores.E += answer < 0 ? -answer : 0;
                    }
                } else if (dimension === "SN") {
                    if (positive === "S") {
                        scores.S += answer > 0 ? answer : 0;
                        scores.N += answer < 0 ? -answer : 0;
                    } else {
                        scores.N += answer > 0 ? answer : 0;
                        scores.S += answer < 0 ? -answer : 0;
                    }
                } else if (dimension === "TF") {
                    if (positive === "T") {
                        scores.T += answer > 0 ? answer : 0;
                        scores.F += answer < 0 ? -answer : 0;
                    } else {
                        scores.F += answer > 0 ? answer : 0;
                        scores.T += answer < 0 ? -answer : 0;
                    }
                } else if (dimension === "JP") {
                    if (positive === "J") {
                        scores.J += answer > 0 ? answer : 0;
                        scores.P += answer < 0 ? -answer : 0;
                    } else {
                        scores.P += answer > 0 ? answer : 0;
                        scores.J += answer < 0 ? -answer : 0;
                    }
                }
            }
            
            // 计算百分比
            const percentages = {};
            const total_EI = scores.E + scores.I;
            const total_SN = scores.S + scores.N;
            const total_TF = scores.T + scores.F;
            const total_JP = scores.J + scores.P;
            
            percentages.E = total_EI > 0 ? Math.round((scores.E / total_EI) * 100) : 50;
            percentages.I = total_EI > 0 ? Math.round((scores.I / total_EI) * 100) : 50;
            percentages.S = total_SN > 0 ? Math.round((scores.S / total_SN) * 100) : 50;
            percentages.N = total_SN > 0 ? Math.round((scores.N / total_SN) * 100) : 50;
            percentages.T = total_TF > 0 ? Math.round((scores.T / total_TF) * 100) : 50;
            percentages.F = total_TF > 0 ? Math.round((scores.F / total_TF) * 100) : 50;
            percentages.J = total_JP > 0 ? Math.round((scores.J / total_JP) * 100) : 50;
            percentages.P = total_JP > 0 ? Math.round((scores.P / total_JP) * 100) : 50;
            
            // 确定类型
            let type = '';
            type += scores.E > scores.I ? 'E' : 'I';
            type += scores.S > scores.N ? 'S' : 'N';
            type += scores.T > scores.F ? 'T' : 'F';
            type += scores.J > scores.P ? 'J' : 'P';
            
            return { type, percentages, scores };
        }

        function getTypeDescription(type) {
            const descriptions = {
                'INTJ': { 
                    name: '建筑师', 
                    desc: '富有想象力的战略思想家，独立而有决心，追求知识和能力。你是天生的规划者，善于看到事物的长远发展。',
                    color: 'linear-gradient(135deg, #667eea, #764ba2)',
                    traits: ['战略思维', '独立', '理性', '完美主义', '有远见']
                },
                'INTP': { 
                    name: '逻辑学家', 
                    desc: '创新的发明家，对知识有着永不满足的渴望。你热爱理论和抽象概念，总是在寻找事物运作的原理。',
                    color: 'linear-gradient(135deg, #8e44ad, #9b59b6)',
                    traits: ['分析力强', '创新', '客观', '好奇心强', '逻辑思维']
                },
                'ENTJ': { 
                    name: '指挥官', 
                    desc: '大胆的领导者，充满魅力和自信。你有战略眼光，善于组织和领导他人实现目标。',
                    color: 'linear-gradient(135deg, #c0392b, #e74c3c)',
                    traits: ['领导力', '果断', '自信', '战略性', '高效']
                },
                'ENTP': { 
                    name: '辩论家', 
                    desc: '聪明好奇的思想家，喜欢智力挑战。你机智灵活，善于从多个角度看问题。',
                    color: 'linear-gradient(135deg, #8e44ad, #3498db)',
                    traits: ['机智', '创新', '善辩', '适应力强', '聪明']
                },
                'INFJ': { 
                    name: '提倡者', 
                    desc: '富有洞察力的理想主义者，对他人有深刻的理解。你追求意义和目的，致力于帮助他人成长。',
                    color: 'linear-gradient(135deg, #16a085, #27ae60)',
                    traits: ['洞察力', '理想主义', '富有同情心', '有原则', '神秘']
                },
                'INFP': { 
                    name: '调停者', 
                    desc: '诗意的梦想家，忠诚而富有创造力。你有强烈的个人价值观，追求真实和和谐。',
                    color: 'linear-gradient(135deg, #27ae60, #2ecc71)',
                    traits: ['理想主义', '富有创意', '同理心强', '灵活', '忠诚']
                },
                'ENFJ': { 
                    name: '主人公', 
                    desc: '富有魅力的领导者，温暖而有同理心。你善于激励他人，致力于帮助他人发挥潜能。',
                    color: 'linear-gradient(135deg, #e67e22, #f39c12)',
                    traits: ['富有魅力', '利他主义', '鼓舞人心', '可靠', '热情']
                },
                'ENFP': { 
                    name: '竞选者', 
                    desc: '热情的创造者，充满想象力。你对新的可能性充满热情，善于激发他人的创造力。',
                    color: 'linear-gradient(135deg, #f39c12, #f1c40f)',
                    traits: ['热情', '创造力', '社交能力', '乐观', '自发性']
                },
                'ISTJ': { 
                    name: '物流师', 
                    desc: '可靠的执行者，认真负责。你重视传统和忠诚，以高标准完成每一项任务。',
                    color: 'linear-gradient(135deg, #2c3e50, #34495e)',
                    traits: ['可靠', '实际', '有条理', '负责任', '传统']
                },
                'ISFJ': { 
                    name: '守卫者', 
                    desc: '专注的保护者，善良细心。你关注他人的需求，默默地为他人提供支持和帮助。',
                    color: 'linear-gradient(135deg, #16a085, #1abc9c)',
                    traits: ['关怀', '细心', '忠诚', '务实', '谦虚']
                },
                'ESTJ': { 
                    name: '执行者', 
                    desc: '高效的组织者，实际而果断。你善于管理和组织，确保事情高效完成。',
                    color: 'linear-gradient(135deg, #7f8c8d, #95a5a6)',
                    traits: ['组织能力', '果断', '实际', '负责', '直接']
                },
                'ESFJ': { 
                    name: '执政官', 
                    desc: '关怀的支持者，热心合作。你重视和谐与合作，努力创造积极的环境。',
                    color: 'linear-gradient(135deg, #3498db, #2980b9)',
                    traits: ['合作', '忠诚', '热心', '社交', '有责任感']
                },
                'ISTP': { 
                    name: '鉴赏家', 
                    desc: '实际的实验者，冷静而灵活。你善于动手解决问题，享受掌握各种技能。',
                    color: 'linear-gradient(135deg, #34495e, #2c3e50)',
                    traits: ['实践能力', '灵活', '理性', '独立', '冒险精神']
                },
                'ISFP': { 
                    name: '探险家', 
                    desc: '灵活的艺术家，安静友好。你喜欢有自己的空间，享受探索和体验新事物。',
                    color: 'linear-gradient(135deg, #e74c3c, #c0392b)',
                    traits: ['艺术性', '敏感', '灵活', '和平', '好奇']
                },
                'ESTP': { 
                    name: '企业家', 
                    desc: '精力充沛的实干家，灵活务实。你专注于即时结果，享受充满活力的生活。',
                    color: 'linear-gradient(135deg, #d35400, #e67e22)',
                    traits: ['行动力', '务实', '大胆', '社交', '观察力强']
                },
                'ESFP': { 
                    name: '表演者', 
                    desc: '自发的表演者，外向友好。你热爱生活，善于带给他人欢乐和活力。',
                    color: 'linear-gradient(135deg, #f1c40f, #f39c12)',
                    traits: ['热情', '自发', '友好', '乐观', '实际']
                }
            };
            return descriptions[type] || { 
                name: '未知类型', 
                desc: '请重新测试',
                color: 'linear-gradient(135deg, #95a5a6, #7f8c8d)',
                traits: []
            };
        }

        function showResult() {
            const result = calculateType();
            const type = result.type;
            const percentages = result.percentages;
            const description = getTypeDescription(type);
            
            // 改变页面主题色
            document.body.classList.add('theme-transition');
            document.body.style.background = description.color;
            
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('progress').style.width = '100%';
            document.getElementById('progress').textContent = '完成！';
            
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.style.background = `linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85))`;
            
            // 生成特征标签HTML
            const traitsHTML = description.traits.map(trait => 
                `<span class="trait-tag">${trait}</span>`
            ).join('');
            
            resultDiv.innerHTML = `
                <div class="personality-avatar">
                    <div class="avatar-circle type-${type}" style="background: ${description.color}">
                        <div class="cartoon-avatar avatar-${type}">
                            <div class="avatar-head">
                                <div class="avatar-eyes">
                                    <div class="eye"></div>
                                    <div class="eye"></div>
                                </div>
                                <div class="avatar-mouth"></div>
                            </div>
                            <div class="avatar-feature"></div>
                        </div>
                    </div>
                </div>
                
                <h2 style="color: #2c3e50;">你的人格类型是：${type}</h2>
                <h3 style="background: ${description.color}; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin: 15px 0; font-size: 2em;">${description.name}</h3>
                <p style="color: #555; max-width: 600px; margin: 0 auto;">${description.desc}</p>
                
                <div class="trait-tags">
                    ${traitsHTML}
                </div>
                
                <div class="result-card">
                    <h4 style="color: #2c3e50; margin-bottom: 20px;">你的倾向分析：</h4>
                    
                    <!-- E / I -->
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-weight: ${percentages.E > percentages.I ? 'bold' : 'normal'}">外向 (E) ${percentages.E}%</span>
                            <span style="font-weight: ${percentages.I > percentages.E ? 'bold' : 'normal'}">${percentages.I}% 内向 (I)</span>
                        </div>
                        <div style="background: #e0e0e0; height: 25px; border-radius: 15px; overflow: hidden; position: relative;">
                            <div style="background: ${description.color}; height: 100%; width: ${percentages.E}%; position: absolute; left: 0; top: 0; transition: width 1s ease;"></div>
                            <div style="background: linear-gradient(135deg, #95a5a6, #7f8c8d); height: 100%; width: ${percentages.I}%; position: absolute; right: 0; top: 0; transition: width 1s ease;"></div>
                        </div>
                    </div>

                    <!-- S / N -->
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-weight: ${percentages.S > percentages.N ? 'bold' : 'normal'}">感觉 (S) ${percentages.S}%</span>
                            <span style="font-weight: ${percentages.N > percentages.S ? 'bold' : 'normal'}">${percentages.N}% 直觉 (N)</span>
                        </div>
                        <div style="background: #e0e0e0; height: 25px; border-radius: 15px; overflow: hidden; position: relative;">
                            <div style="background: ${description.color}; height: 100%; width: ${percentages.S}%; position: absolute; left: 0; top: 0; transition: width 1s ease;"></div>
                            <div style="background: linear-gradient(135deg, #95a5a6, #7f8c8d); height: 100%; width: ${percentages.N}%; position: absolute; right: 0; top: 0; transition: width 1s ease;"></div>
                        </div>
                    </div>

                    <!-- T / F -->
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-weight: ${percentages.T > percentages.F ? 'bold' : 'normal'}">思维 (T) ${percentages.T}%</span>
                            <span style="font-weight: ${percentages.F > percentages.T ? 'bold' : 'normal'}">${percentages.F}% 情感 (F)</span>
                        </div>
                        <div style="background: #e0e0e0; height: 25px; border-radius: 15px; overflow: hidden; position: relative;">
                            <div style="background: ${description.color}; height: 100%; width: ${percentages.T}%; position: absolute; left: 0; top: 0; transition: width 1s ease;"></div>
                            <div style="background: linear-gradient(135deg, #95a5a6, #7f8c8d); height: 100%; width: ${percentages.F}%; position: absolute; right: 0; top: 0; transition: width 1s ease;"></div>
                        </div>
                    </div>

                    <!-- J / P -->
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-weight: ${percentages.J > percentages.P ? 'bold' : 'normal'}">判断 (J) ${percentages.J}%</span>
                            <span style="font-weight: ${percentages.P > percentages.J ? 'bold' : 'normal'}">${percentages.P}% 知觉 (P)</span>
                        </div>
                        <div style="background: #e0e0e0; height: 25px; border-radius: 15px; overflow: hidden; position: relative;">
                            <div style="background: ${description.color}; height: 100%; width: ${percentages.J}%; position: absolute; left: 0; top: 0; transition: width 1s ease;"></div>
                            <div style="background: linear-gradient(135deg, #95a5a6, #7f8c8d); height: 100%; width: ${percentages.P}%; position: absolute; right: 0; top: 0; transition: width 1s ease;"></div>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
                    <button class="tab-btn" style="background: ${description.color}; border: none;" onclick="resetQuiz()">重新测试</button>
                    <button class="tab-btn" style="background: white; color: #667eea; border: 2px solid #667eea;" onclick="showTab('types')">查看所有类型</button>
                    <button class="tab-btn" style="background: white; color: #667eea; border: 2px solid #667eea;" onclick="shareResult('${type}')">分享结果</button>
                </div>
            `;
        }

        function shareResult(type) {
            const description = getTypeDescription(type);
            const text = `我刚完成了MBTI性格测试！我的人格类型是${type} - ${description.name}。${description.desc}`;
            
            if (navigator.share) {
                navigator.share({
                    title: `我的MBTI人格类型：${type}`,
                    text: text,
                    url: window.location.href
                }).catch(err => console.log('分享失败', err));
            } else {
                // 复制到剪贴板
                navigator.clipboard.writeText(text).then(() => {
                    alert('结果已复制到剪贴板！');
                }).catch(() => {
                    alert('复制失败，请手动复制');
                });
            }
        }

        function resetQuiz() {
            currentQuestion = 0;
            userAnswers = [];
            shuffledQuestions = [];
            
            // 恢复原始背景色
            document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            
            document.getElementById('test-content').style.display = 'none';
            document.getElementById('intro-section').style.display = 'block';
            document.getElementById('result').style.display = 'none';
            document.getElementById('progress').style.width = '0%';
            document.getElementById('progress').textContent = '0%';
        }

        function showTab(tabName) {
            // 隐藏所有标签页
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // 显示选中的标签页
            document.getElementById(tabName).classList.add('active');
            
            // 更新按钮状态
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // 切换标签时恢复原始背景色（除非在结果页面）
            if (tabName !== 'test' || document.getElementById('result').style.display === 'none') {
                document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            }
            
            // 如果切换到测试页面且测试已完成，重置测试
            if (tabName === 'test' && currentQuestion >= shuffledQuestions.length && shuffledQuestions.length > 0) {
                resetQuiz();
            }
        }

        // 添加卡片点击效果和动画
        document.addEventListener('DOMContentLoaded', function() {
            // 为人格卡片添加渐进动画
            const cards = document.querySelectorAll('.personality-card');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.05}s`;
                card.style.animation = 'fadeInUp 0.6s ease forwards';
                card.style.opacity = '0';
                
                setTimeout(() => {
                    card.style.opacity = '1';
                }, index * 50);
                
                card.addEventListener('click', function() {
                    const typeCode = this.querySelector('.type-code').textContent;
                    const typeName = this.querySelector('h3').textContent;
                    const nickname = this.querySelector('.nickname').textContent;
                    const description = this.querySelector('p').textContent;
                    
                    // 创建弹出详情
                    alert(`${typeCode} - ${typeName}\n${nickname}\n\n${description}\n\n点击确定返回`);
                });
            });
        });
    </script>
</body>
</html>
